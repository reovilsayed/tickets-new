import{u as y,b,j as s,a as f,r as h,H as w}from"./app-2dd69cca.js";import{u as E,I,P}from"./useInfiniteFetch-9db73852.js";import{f as S}from"./utils-8b9f25e8.js";import"./index-fdd60505.js";const C=({extra:e})=>{var m,o,l;y();const{addItem:c,removeItem:n,inCart:a}=b(),t=a(e==null?void 0:e.id);return s.jsx("div",{className:`ticket-item-container col-lg-2 col-md-3 col-sm-3 col-6 my-hover-effect g-3 ${t?"active":""}`,onClick:()=>c(e),children:s.jsxs("div",{className:"extra-item-card",children:[t?s.jsx("button",{className:"delete-btn",onClick:()=>{n(e.id)},children:s.jsx("i",{className:"fa fa-times"})}):"",s.jsxs("div",{className:"custom-card",children:[s.jsxs("span",{className:"extra-item-badge",children:[S(e!=null&&e.sale_price?e==null?void 0:e.sale_price:e==null?void 0:e.price)," â‚¬"]}),s.jsxs("div",{className:"card-header position-relative",children:[e!=null&&e.thumbnail?s.jsx("img",{className:"extra-item-img",src:(e==null?void 0:e.thumbnail)??"/images/no-image.jpg",alt:e.display_name}):s.jsx("div",{className:"extra-item-img",children:s.jsx("i",{class:"fas fa-cocktail fa-2x"})}),((m=e==null?void 0:e.event)==null?void 0:m.name)&&s.jsx("span",{className:"extra-item-unit",children:((o=e==null?void 0:e.event)==null?void 0:o.name.length)>15?`${e.event.name.substring(0,15)}...`:(l=e==null?void 0:e.event)==null?void 0:l.name})]}),s.jsx("div",{className:"card-body extra-item-body",children:s.jsx("p",{title:e.display_name,className:"extra-item-name",children:e==null?void 0:e.display_name})})]})]})})};function $(){var p,u;const e=f(i=>i.searchQuery.query),c=f(i=>i.filter.event),{data:n,isError:a,isLoading:t,isSuccess:m,isFetching:o,hasNextPage:l,fetchNextPage:r,refetch:_}=E(["extras-page",e,c],"https://events.essenciacompany.com/api/extras",{query:e,event_id:c==null?void 0:c.id}),d=h.useCallback(()=>{const i=document.documentElement.scrollTop;i<500&&i===0&&l&&!o&&r()},[r,l,o]);return h.useEffect(()=>(window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)}),[d]),s.jsx("div",{className:"overflow-y-scroll overflow-x-none pt-3",children:c?t?s.jsx("div",{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:s.jsx(w,{color:"#36d7b7"})}):s.jsx(I,{loadMore:r,hasMore:l,loader:s.jsx("div",{style:{textAlign:"center",paddingTop:"25px"},children:s.jsx(P,{color:"#36d7b7"})}),useWindow:!1,style:{overflowY:"scroll",maxHeight:"90vh",padding:"20px 10px"},onScroll:d,children:s.jsx("div",{className:"row g-3",children:a?s.jsx("div",{style:{textAlign:"center",color:"red"},children:"Something went wrong"}):(p=n==null?void 0:n.pages)!=null&&p.length?(u=n==null?void 0:n.pages)==null?void 0:u.map((i,v)=>{var g;return s.jsx(h.Fragment,{children:(g=i==null?void 0:i.data)==null?void 0:g.map((j,N)=>s.jsx(C,{extra:j},N))},v)}):s.jsx("div",{style:{textAlign:"center"},children:"No matching products found."})})}):s.jsx("h4",{className:"text-info text-center",children:"Please Select An Event"})})}export{$ as default};
