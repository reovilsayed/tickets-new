import{u as y,b,j as e,a as j,r as p,H as w}from"./app-87c75b9d.js";import{u as E,I,P}from"./useInfiniteFetch-ed69de6a.js";import{f as S}from"./utils-8b9f25e8.js";import"./index-d4b7d781.js";const C=({extra:s})=>{var r,o,l;y();const{addItem:c,removeItem:n,inCart:a}=b(),t=a(s==null?void 0:s.id);return e.jsx("div",{className:`ticket-item-container col-lg-2 col-md-3 col-sm-3 col-6 my-hover-effect g-3 ${t?"active":""}`,onClick:()=>c(s),children:e.jsxs("div",{className:"extra-item-card",children:[t?e.jsx("button",{className:"delete-btn",onClick:()=>{n(s.id)},children:e.jsx("i",{className:"fa fa-times"})}):"",e.jsxs("div",{className:"custom-card",children:[e.jsxs("span",{className:"extra-item-badge",children:[S(s!=null&&s.sale_price?s==null?void 0:s.sale_price:s==null?void 0:s.price)," â‚¬"]}),e.jsxs("div",{className:"card-header position-relative",children:[s!=null&&s.thumbnail?e.jsx("img",{className:"extra-item-img",src:(s==null?void 0:s.thumbnail)??"/images/no-image.jpg",alt:s.display_name}):e.jsx("div",{className:"extra-item-img",children:e.jsx("i",{class:"fas fa-cocktail fa-2x"})}),((r=s==null?void 0:s.event)==null?void 0:r.name)&&e.jsx("span",{className:"extra-item-unit",children:((o=s==null?void 0:s.event)==null?void 0:o.name.length)>15?`${s.event.name.substring(0,15)}...`:(l=s==null?void 0:s.event)==null?void 0:l.name})]}),e.jsx("div",{className:"card-body extra-item-body",children:e.jsx("p",{title:s.display_name,className:"extra-item-name",children:s==null?void 0:s.display_name})})]})]})})};function $(){var u,v;const s=j(i=>i.searchQuery.query),c=j(i=>i.filter.event),{data:n,isError:a,isLoading:t,isSuccess:r,isFetching:o,hasNextPage:l,fetchNextPage:h,refetch:_}=E(["extras-page",s,c],"https://events.essenciacompany.com/api/extras",{query:s,event_id:c==null?void 0:c.id}),d=p.useCallback(()=>{const i=document.documentElement.scrollTop;i<500&&i===0&&l&&!o&&h()},[h,l,o]);return p.useEffect(()=>(window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)}),[d]),e.jsx("div",{className:"overflow-y-scroll overflow-x-none pt-3",children:c?t?e.jsx("div",{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(w,{color:"#36d7b7"})}):e.jsx(I,{loadMore:h,hasMore:l,loader:e.jsx("div",{style:{textAlign:"center",paddingTop:"25px"},children:e.jsx(P,{color:"#36d7b7"})}),useWindow:!1,style:{overflowY:"scroll",maxHeight:"90vh",padding:"20px 10px"},onScroll:d,children:e.jsx("div",{className:"row g-3",children:a?e.jsx("div",{style:{textAlign:"center",color:"red"},children:"Something went wrong"}):(u=n==null?void 0:n.pages)!=null&&u.length?(v=n==null?void 0:n.pages)==null?void 0:v.map((i,f)=>{var g;return e.jsx(p.Fragment,{children:(g=i==null?void 0:i.data)==null?void 0:g.map((m,N)=>{if((m==null?void 0:m.price)>0)return e.jsx(C,{extra:m},N)})},f)}):e.jsx("div",{style:{textAlign:"center"},children:"No matching products found."})})}):e.jsx("h4",{className:"text-info text-center",children:"Please Select An Event"})})}export{$ as default};
