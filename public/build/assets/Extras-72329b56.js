import{u as N,b,j as e,a as f,r as h,H as w}from"./app-de3c0a8e.js";import{u as E,I,P}from"./useInfiniteFetch-227e8a08.js";import{f as _}from"./utils-8b9f25e8.js";import"./index-aa8c8b43.js";const S=({extra:s})=>{var m,o,l;N();const{addItem:c,removeItem:n,inCart:a}=b(),t=a(s==null?void 0:s.id);return e.jsx("div",{className:`ticket-item-container col-lg-2 col-md-3 col-sm-3 col-6 my-hover-effect g-3 ${t?"active":""}`,onClick:()=>c(s),children:e.jsxs("div",{className:"extra-item-card",children:[t?e.jsx("button",{className:"delete-btn",onClick:()=>{n(s.id)},children:e.jsx("i",{className:"fa fa-times"})}):"",e.jsxs("div",{className:"custom-card",children:[e.jsxs("span",{className:"extra-item-badge",children:[_(s!=null&&s.sale_price?s==null?void 0:s.sale_price:s==null?void 0:s.price)," â‚¬"]}),e.jsxs("div",{className:"card-header position-relative",children:[s!=null&&s.thumbnail?e.jsx("img",{className:"extra-item-img",src:(s==null?void 0:s.thumbnail)??"/images/no-image.jpg",alt:s.display_name}):e.jsx("div",{className:"extra-item-img",children:e.jsx("i",{class:"fas fa-cocktail fa-2x"})}),((m=s==null?void 0:s.event)==null?void 0:m.name)&&e.jsx("span",{className:"extra-item-unit",children:((o=s==null?void 0:s.event)==null?void 0:o.name.length)>15?`${s.event.name.substring(0,15)}...`:(l=s==null?void 0:s.event)==null?void 0:l.name})]}),e.jsx("div",{className:"card-body extra-item-body",children:e.jsx("p",{title:s.display_name,className:"extra-item-name",children:(s==null?void 0:s.display_name.length)>15?`${s.display_name.substring(0,15)}...`:s.display_name})})]})]})})};function A(){var p,u;const s=f(i=>i.searchQuery.query),c=f(i=>i.filter.event),{data:n,isError:a,isLoading:t,isSuccess:m,isFetching:o,hasNextPage:l,fetchNextPage:r,refetch:C}=E(["extras-page",s,c],"https://events.essenciacompany.com/api/extras",{query:s,event_id:c==null?void 0:c.id}),d=h.useCallback(()=>{const i=document.documentElement.scrollTop;i<500&&i===0&&l&&!o&&r()},[r,l,o]);return h.useEffect(()=>(window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)}),[d]),e.jsx("div",{className:"overflow-y-scroll overflow-x-none pt-3",children:c?t?e.jsx("div",{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(w,{color:"#36d7b7"})}):e.jsx(I,{loadMore:r,hasMore:l,loader:e.jsx("div",{style:{textAlign:"center",paddingTop:"25px"},children:e.jsx(P,{color:"#36d7b7"})}),useWindow:!1,style:{overflowY:"scroll",maxHeight:"90vh",padding:"20px 10px"},onScroll:d,children:e.jsx("div",{className:"row g-3",children:a?e.jsx("div",{style:{textAlign:"center",color:"red"},children:"Something went wrong"}):(p=n==null?void 0:n.pages)!=null&&p.length?(u=n==null?void 0:n.pages)==null?void 0:u.map((i,g)=>{var v;return e.jsx(h.Fragment,{children:(v=i==null?void 0:i.data)==null?void 0:v.map((j,y)=>e.jsx(S,{extra:j},y))},g)}):e.jsx("div",{style:{textAlign:"center"},children:"No matching products found."})})}):e.jsx("h4",{className:"text-info text-center",children:"Please Select An Event"})})}export{A as default};
